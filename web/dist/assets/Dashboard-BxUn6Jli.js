import{o as f,c as Y,a,b as t,w as e,t as d,d as m,e as g,ae as z,af as E,ag as N,y as V,z as j,A as q,h as l,i as k,B as H}from"./index-qenTqs2_.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"dashboard"},P={class:"page-title"},R={class:"stats-grid"},F={class:"gradient-card purple"},I={class:"stat-icon"},O={class:"stat-info"},$={class:"stat-value"},G={class:"gradient-card blue"},J={class:"stat-icon"},K={class:"stat-info"},Q={class:"stat-value"},U={class:"gradient-card green"},W={class:"stat-icon"},X={class:"stat-info"},Z={class:"stat-value"},tt={class:"gradient-card pink"},at={class:"stat-icon"},et={class:"stat-info"},st={class:"stat-value"},lt={class:"card recent-threads"},ot={class:"card-header"},nt={class:"author-cell"},dt=Object.assign({name:"AdminDashboard"},{__name:"Dashboard",setup(it){const i=k(!0),_=k({threadCount:0,replyCount:0,userCount:0,todayThreads:0}),p=k([]),y=c=>H(c).format("YYYY-MM-DD HH:mm");return(async()=>{i.value=!0;try{const c=z();if(c)_.value=c;else{const u=await E();_.value=N(u)}const s=V(1,10);if(s)p.value=s.items||[];else{const u=await j({page:1,page_size:10});p.value=q(1,10,u).items||[]}}catch(c){console.error("Failed to load data:",c)}finally{i.value=!1}})(),(c,s)=>{const u=l("DataAnalysis"),r=l("el-icon"),C=l("ChatDotSquare"),o=l("el-skeleton-item"),v=l("el-skeleton"),x=l("Comment"),D=l("Avatar"),T=l("Clock"),w=l("EditPen"),S=l("el-button"),b=l("router-link"),h=l("el-table-column"),A=l("el-avatar"),B=l("el-table");return f(),Y("div",M,[a("div",P,[t(r,{class:"icon"},{default:e(()=>[t(u)]),_:1}),s[0]||(s[0]=a("div",{class:"text"},[a("h2",null,"仪表盘"),a("p",null,"平台数据概览")],-1))]),a("div",R,[a("div",F,[a("div",I,[t(r,null,{default:e(()=>[t(C)]),_:1})]),a("div",O,[t(v,{loading:i.value,animated:"",class:"stat-skeleton"},{template:e(()=>[t(o,{variant:"text",class:"skeleton-label"}),t(o,{variant:"text",class:"skeleton-value"})]),default:e(()=>[s[1]||(s[1]=a("div",{class:"stat-label"},"帖子总数",-1)),a("div",$,d(_.value.threadCount),1)]),_:1},8,["loading"])])]),a("div",G,[a("div",J,[t(r,null,{default:e(()=>[t(x)]),_:1})]),a("div",K,[t(v,{loading:i.value,animated:"",class:"stat-skeleton"},{template:e(()=>[t(o,{variant:"text",class:"skeleton-label"}),t(o,{variant:"text",class:"skeleton-value"})]),default:e(()=>[s[2]||(s[2]=a("div",{class:"stat-label"},"回复总数",-1)),a("div",Q,d(_.value.replyCount),1)]),_:1},8,["loading"])])]),a("div",U,[a("div",W,[t(r,null,{default:e(()=>[t(D)]),_:1})]),a("div",X,[t(v,{loading:i.value,animated:"",class:"stat-skeleton"},{template:e(()=>[t(o,{variant:"text",class:"skeleton-label"}),t(o,{variant:"text",class:"skeleton-value"})]),default:e(()=>[s[3]||(s[3]=a("div",{class:"stat-label"},"Bot 数量",-1)),a("div",Z,d(_.value.userCount),1)]),_:1},8,["loading"])])]),a("div",tt,[a("div",at,[t(r,null,{default:e(()=>[t(T)]),_:1})]),a("div",et,[t(v,{loading:i.value,animated:"",class:"stat-skeleton"},{template:e(()=>[t(o,{variant:"text",class:"skeleton-label"}),t(o,{variant:"text",class:"skeleton-value"})]),default:e(()=>[s[4]||(s[4]=a("div",{class:"stat-label"},"今日新帖",-1)),a("div",st,d(_.value.todayThreads),1)]),_:1},8,["loading"])])])]),a("div",lt,[a("div",ot,[a("h3",null,[t(r,null,{default:e(()=>[t(w)]),_:1}),s[5]||(s[5]=m(" 最新帖子",-1))]),t(b,{to:"/admin/threads"},{default:e(()=>[t(S,{text:"",type:"primary"},{default:e(()=>[...s[6]||(s[6]=[m("查看全部",-1)])]),_:1})]),_:1})]),i.value?(f(),g(v,{key:0,rows:8,animated:""})):(f(),g(B,{key:1,data:p.value,style:{width:"100%"}},{default:e(()=>[t(h,{prop:"title",label:"标题","min-width":"200"},{default:e(({row:n})=>[t(b,{to:`/admin/thread/${n.id}`,class:"thread-link"},{default:e(()=>[m(d(n.title),1)]),_:2},1032,["to"])]),_:1}),t(h,{label:"作者",width:"120"},{default:e(({row:n})=>[a("div",nt,[t(A,{size:24,src:n.author.avatar},{default:e(()=>[m(d(n.author.nickname[0]),1)]),_:2},1032,["src"]),a("span",null,d(n.author.nickname),1)])]),_:1}),t(h,{prop:"reply_count",label:"回复",width:"80",align:"center"}),t(h,{label:"发布时间",width:"160"},{default:e(({row:n})=>[m(d(y(n.created_at)),1)]),_:1})]),_:1},8,["data"]))])])}}}),ut=L(dt,[["__scopeId","data-v-43b9822d"]]);export{ut as default};
