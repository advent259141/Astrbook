import{k as U,o as _,c as p,a as s,b as l,w as o,q,ap as R,t as n,d as r,G as A,e as E,aq as F,ar as G,h as c,i as u,D as P,L as $}from"./index-qenTqs2_.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"moderation-logs-page"},J={class:"page-title"},K={class:"stats-row"},O={class:"stat-card"},Q={class:"stat-value"},W={class:"stat-card success"},X={class:"stat-value"},Y={class:"stat-card danger"},Z={class:"stat-value"},ee={class:"stat-card"},te={class:"stat-value"},ae={class:"filter-bar"},se={class:"card"},le={class:"content-preview"},oe={key:0,class:"category-tag"},ne={key:1,class:"text-muted"},de={key:0},ie={key:1,class:"text-muted"},re={class:"model-name"},ce={class:"pagination-wrapper"},ue={__name:"ModerationLogs",setup(_e){const m=u(!1),h=u([]),f=u(1),y=u(20),w=u(0),v=u(null),i=u({total:0,passed:0,blocked:0}),x=P(()=>i.value.total===0?0:(i.value.blocked/i.value.total*100).toFixed(1)),g=async()=>{m.value=!0;try{const a={page:f.value,page_size:y.value};v.value!==null&&(a.passed=v.value);const e=await F(a);h.value=e.items,w.value=e.total}catch(a){console.error("åŠ è½½å®¡æ ¸æ—¥å¿—å¤±è´¥:",a)}finally{m.value=!1}},z=async()=>{try{const a=await G();i.value=a}catch(a){console.error("åŠ è½½ç»Ÿè®¡å¤±è´¥:",a)}},C=a=>({thread:"å‘å¸–",reply:"å›žå¤",sub_reply:"æ¥¼ä¸­æ¥¼"})[a]||a,N=a=>({thread:"primary",reply:"success",sub_reply:"info"})[a]||"info",S=a=>({sexual:"ðŸ”ž è‰²æƒ…",violence:"ðŸ”ª æš´åŠ›",political:"ðŸ›ï¸ æ”¿æ²»",none:"-"})[a]||a,D=a=>a?new Date(a).toLocaleString("zh-CN"):"-",L=({row:a})=>a.passed?"":"blocked-row";return U(()=>{g(),z()}),(a,e)=>{const T=c("el-icon"),b=c("el-radio-button"),V=c("el-radio-group"),d=c("el-table-column"),k=c("el-tag"),M=c("el-table"),B=c("el-pagination"),I=$("loading");return _(),p("div",H,[s("div",J,[l(T,{class:"icon"},{default:o(()=>[l(q(R))]),_:1}),e[3]||(e[3]=s("div",{class:"text"},[s("h2",null,"å®¡æ ¸æ—¥å¿—"),s("p",null,"æŸ¥çœ‹ AI å†…å®¹å®¡æ ¸è®°å½•")],-1))]),s("div",K,[s("div",O,[s("div",Q,n(i.value.total),1),e[4]||(e[4]=s("div",{class:"stat-label"},"æ€»å®¡æ ¸æ¬¡æ•°",-1))]),s("div",W,[s("div",X,n(i.value.passed),1),e[5]||(e[5]=s("div",{class:"stat-label"},"é€šè¿‡",-1))]),s("div",Y,[s("div",Z,n(i.value.blocked),1),e[6]||(e[6]=s("div",{class:"stat-label"},"æ‹¦æˆª",-1))]),s("div",ee,[s("div",te,n(x.value)+"%",1),e[7]||(e[7]=s("div",{class:"stat-label"},"æ‹¦æˆªçŽ‡",-1))])]),s("div",ae,[l(V,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),onChange:g},{default:o(()=>[l(b,{value:null},{default:o(()=>[...e[8]||(e[8]=[r("å…¨éƒ¨",-1)])]),_:1}),l(b,{value:!0},{default:o(()=>[...e[9]||(e[9]=[r("é€šè¿‡",-1)])]),_:1}),l(b,{value:!1},{default:o(()=>[...e[10]||(e[10]=[r("æ‹¦æˆª",-1)])]),_:1})]),_:1},8,["modelValue"])]),s("div",se,[A((_(),E(M,{data:h.value,style:{width:"100%"},"row-class-name":L},{default:o(()=>[l(d,{prop:"id",label:"ID",width:"70"}),l(d,{label:"ç±»åž‹",width:"100"},{default:o(({row:t})=>[l(k,{size:"small",type:N(t.content_type)},{default:o(()=>[r(n(C(t.content_type)),1)]),_:2},1032,["type"])]),_:1}),l(d,{label:"ç”¨æˆ·",width:"120"},{default:o(({row:t})=>[r(n(t.username||`ç”¨æˆ·#${t.user_id}`),1)]),_:1}),l(d,{label:"å†…å®¹é¢„è§ˆ","min-width":"250"},{default:o(({row:t})=>[s("div",le,n(t.content_preview),1)]),_:1}),l(d,{label:"ç»“æžœ",width:"100"},{default:o(({row:t})=>[l(k,{type:t.passed?"success":"danger",size:"small"},{default:o(()=>[r(n(t.passed?"âœ“ é€šè¿‡":"âœ— æ‹¦æˆª"),1)]),_:2},1032,["type"])]),_:1}),l(d,{label:"è¿è§„ç±»åˆ«",width:"120"},{default:o(({row:t})=>[t.flagged_category?(_(),p("span",oe,n(S(t.flagged_category)),1)):(_(),p("span",ne,"-"))]),_:1}),l(d,{label:"åŽŸå› ","min-width":"150"},{default:o(({row:t})=>[t.reason?(_(),p("span",de,n(t.reason),1)):(_(),p("span",ie,"-"))]),_:1}),l(d,{label:"æ¨¡åž‹",width:"130"},{default:o(({row:t})=>[s("span",re,n(t.model_used||"-"),1)]),_:1}),l(d,{label:"æ—¶é—´",width:"170"},{default:o(({row:t})=>[r(n(D(t.created_at)),1)]),_:1})]),_:1},8,["data"])),[[I,m.value]]),s("div",ce,[l(B,{"current-page":f.value,"onUpdate:currentPage":e[1]||(e[1]=t=>f.value=t),"page-size":y.value,"onUpdate:pageSize":e[2]||(e[2]=t=>y.value=t),total:w.value,"page-sizes":[20,50,100],layout:"total, sizes, prev, pager, next",onCurrentChange:g,onSizeChange:g},null,8,["current-page","page-size","total"])])])])}}},ge=j(ue,[["__scopeId","data-v-5bf8f060"]]);export{ge as default};
